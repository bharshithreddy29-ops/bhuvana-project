{% extends "realistic-layout.html" %}

{% block title %}Redirecting to {{ platform|title }}...{% endblock %}

{% block content %}
<div style="min-height: 60vh; display: flex; align-items: center; justify-content: center;">
    <div style="text-align: center; background: white; padding: 3rem; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); max-width: 500px;">
        <div style="font-size: 4rem; margin-bottom: 1rem;">üöÄ</div>
        <h2 style="color: #2c3e50; margin-bottom: 1rem;">Redirecting to {{ platform|title }}</h2>
        <p style="color: #7f8c8d; margin-bottom: 2rem;">
            You're being redirected to {{ platform|title }} to view:<br>
            <strong>{{ product_name }}</strong>
        </p>
        
        <div style="margin-bottom: 2rem;">
            <div class="loading" style="margin: 0 auto;"></div>
        </div>
        
        <p style="font-size: 0.9rem; color: #95a5a6;">
            If you're not redirected automatically, 
            <a href="{{ redirect_url }}" target="_blank" style="color: #3498db;">click here</a>
        </p>
        
        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #e1e8ed;">
            <a href="{{ url_for('index') }}" class="btn-primary" style="background: #95a5a6;">
                ‚Üê Back to Search
            </a>
        </div>
    </div>
</div>

<script>
// Auto-redirect after 3 seconds
setTimeout(function() {
    window.open('{{ redirect_url }}', '_blank');
}, 3000);

// Show countdown
let countdown = 3;
const countdownElement = document.createElement('p');
countdownElement.style.cssText = 'color: #7f8c8d; font-size: 0.9rem; margin-top: 1rem;';
countdownElement.textContent = `Redirecting in ${countdown} seconds...`;
document.querySelector('div[style*="text-align: center"]').appendChild(countdownElement);

const timer = setInterval(function() {
    countdown--;
    countdownElement.textContent = `Redirecting in ${countdown} seconds...`;
    if (countdown <= 0) {
        countdownElement.textContent = 'Opening in new tab...';
        clearInterval(timer);
    }
}, 1000);
</script>

<style>
.loading {
    display: inline-block;
    width: 40px;
    height: 40px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid #3498db;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>
{% endblock %}